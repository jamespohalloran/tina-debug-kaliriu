{{ define "main" }}
    {{ with .Params }}
        <main id="main">
            <section class="projects__header-background">
                <div class="projects__header-container">
                    <h1 class="projects__header-title">{{ .Title }}</h1>
                </div>
                <!--Waves Container-->
                    <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                    <defs>
                    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                    </defs>
                    <g class="parallax">
                    <use xlink:href="#gentle-wave" x="48" y="0" />
                    <use xlink:href="#gentle-wave" x="48" y="3" />
                    <use xlink:href="#gentle-wave" x="48" y="5" />
                    <use xlink:href="#gentle-wave" x="48" y="7" />
                    </g>
                    </svg>
                <!--Waves end-->
            </section>

            <section class="projects__list-background">
                <div class="projects__list-container">
                    <ul class="projects__list">
                        {{ range .projects }}
                            <li id="project" style="background-image: url('https://res.cloudinary.com/ddtcgm4kc/image/upload{{ .img | relURL }}')">
                                <button type="button" onclick="location.href='#popup1'" href="#">
                                    <h2>{{ .title }}</h2>
                                    <p>{{ .link_text }}</p>
                                </button>
                            </li>
                            <section id="popup1" class="popup_overlay">
                                <img src="https://res.cloudinary.com/ddtcgm4kc/image/upload{{ .img | relURL }}" alt="{{ .title }}">
                            </section>
                        {{ end }}
                    </ul>
                </div>
            </section>

            <script>
                /* CONFIRMATION PAGE */
                let testForm = document.querySelector("#project");      
                testForm.addEventListener('button', e => {
                  e.preventDefault();
                  const formData = new FormData(testForm);
                  fetch(testForm.getAttribute('action'), {
                    method: 'POST',
                    headers: {
                      'Accept': 'application/x-www-form-urlencoded;charset=UTF-8',
                      'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                    },
                    body: new URLSearchParams(formData).toString()
                  })
                  .then(res => {
                    if (res) {
                      M.toast({
                        html: 'Thank you for your submission!',
                        classes: 'pulse'
                      });
                    }
                  });
                });
            </script>

        </main>
    {{ end }}
    {{ partial "cta" . }}
{{ end }}


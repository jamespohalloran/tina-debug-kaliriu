{{ define "main" }}
    {{ with .Params }}
        <main id="main">
            <section class="contact__background">
                <div class="contact__container" id="contact">
                    <h1 class="contact__title">{{ .Title }}</h1>
                    <p class="contact__p">{{ .description }}</h1>
                    <form class="contact__form" data-netlify="true" method="POST" name="contact" action="/#contact">
                        <div class="form_name">
                            <input name="name" type="text" id="name" required placeholder="{{ .name_placeholder }}">
                        </div>
                        <div class="form_email">
                            <input name="email" type="email" id="email" required placeholder="{{ .email_placeholder }}">
                        </div>
                        <div class="form_message">
                            <textarea class="data-hj-allow" name="message" id="message" rows="6" required placeholder="{{ .message_placeholder }}"></textarea>
                        </div>
                        <button onclick="location.href='#popup1'" type="submit">{{ .button }}</button>
                    </form>
                </div>
                <!--Waves Container-->
                    <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                    <defs>
                    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                    </defs>
                    <g class="parallax">
                    <use xlink:href="#gentle-wave" x="48" y="0" />
                    <use xlink:href="#gentle-wave" x="48" y="3" />
                    <use xlink:href="#gentle-wave" x="48" y="5" />
                    <use xlink:href="#gentle-wave" x="48" y="7" />
                    </g>
                    </svg>
                <!--Waves end-->
            </section>

            <section id="popup1" class="popup_overlay">
                <div class="popup_background">
                  <div class="popup_container">
                    <a class="popup_close" href="/">
                        <i>&#xe806;</i>
                    </a>
                    <p class="popup_message">{{ .lightbox_message }}</p>
                  </div>
                </div>
            </section>

            <script>
                /* CONFIRMATION PAGE */
                let testForm = document.querySelector("#contact form");      
                testForm.addEventListener('submit', e => {
                  e.preventDefault();
                  const formData = new FormData(testForm);
                  fetch(testForm.getAttribute('action'), {
                    method: 'POST',
                    headers: {
                      'Accept': 'application/x-www-form-urlencoded;charset=UTF-8',
                      'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                    },
                    body: new URLSearchParams(formData).toString()
                  })
                  .then(res => {
                    if (res) {
                      M.toast({
                        html: 'Thank you for your submission!',
                        classes: 'pulse'
                      });
                    }
                  });
                });
            </script>

        </main>
    {{ end }}
{{ end }}

